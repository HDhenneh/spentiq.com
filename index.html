<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Spentiq — Visual Calculators for Professionals</title>
<link href="https://fonts.googleapis.com/css2?family=Instrument+Serif:ital@0;1&family=Syne:wght@400;600;700;800&family=IBM+Plex+Mono:wght@300;400;500&display=swap" rel="stylesheet">
<style>
  :root {
    --paper:   #F7F3EC;
    --paper-2: #EFE9DE;
    --paper-3: #E4DBС8;
    --rule:    #D4C9B4;
    --mid:     #B0A48E;
    --ink-light: #7A6E5A;
    --ink:     #2C2418;
    --ink-deep:#1A1510;
    --spark:   #1A6B4A;
    --spark-2: #0D4A32;
    --spark-hi: #22C97A;
    --spark-bg: #EBF7F2;
    --red:     #C0392B;
    --amber:   #D4860A;
    --white:   #FDFAF5;
  }

  *, *::before, *::after { margin:0; padding:0; box-sizing:border-box; }
  html { scroll-behavior: smooth; }

  body {
    background: var(--paper);
    color: var(--ink);
    font-family: 'IBM Plex Mono', monospace;
    font-weight: 300;
    overflow-x: hidden;
  }

  /* Subtle paper texture */
  body::before {
    content: '';
    position: fixed;
    inset: 0;
    pointer-events: none;
    z-index: 9999;
    opacity: 0.025;
    background-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 200 200' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='n'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.65' numOctaves='3' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23n)'/%3E%3C/svg%3E");
    background-size: 200px 200px;
  }

  /* ══════════════════════════════
     NAV
  ══════════════════════════════ */
  nav {
    position: fixed;
    top: 0; left: 0; right: 0;
    z-index: 200;
    height: 64px;
    display: flex;
    align-items: center;
    justify-content: space-between;
    padding: 0 48px;
    background: rgba(247,243,236,0.95);
    backdrop-filter: blur(16px);
    border-bottom: 1px solid var(--rule);
  }

  .nav-brand {
    display: flex;
    align-items: baseline;
    gap: 10px;
    text-decoration: none;
  }

  .nav-logo {
    font-family: 'Instrument Serif', serif;
    font-size: 24px;
    color: var(--ink-deep);
    letter-spacing: -0.02em;
  }

  .nav-logo em {
    font-style: italic;
    color: var(--spark);
  }

  .nav-tagline {
    font-size: 9px;
    letter-spacing: 0.15em;
    text-transform: uppercase;
    color: var(--mid);
    padding-left: 10px;
    border-left: 1px solid var(--rule);
  }

  .nav-links {
    display: flex;
    align-items: center;
    gap: 32px;
    list-style: none;
  }

  .nav-links a {
    font-size: 10px;
    letter-spacing: 0.15em;
    text-transform: uppercase;
    color: var(--ink-light);
    text-decoration: none;
    transition: color 0.2s;
  }
  .nav-links a:hover { color: var(--ink); }

  .nav-cta {
    font-size: 10px;
    letter-spacing: 0.12em;
    text-transform: uppercase;
    color: var(--white);
    background: var(--spark);
    padding: 10px 22px;
    border: none;
    cursor: pointer;
    text-decoration: none;
    font-family: 'IBM Plex Mono', monospace;
    transition: background 0.2s;
  }
  .nav-cta:hover { background: var(--spark-2); }

  /* ══════════════════════════════
     HERO
  ══════════════════════════════ */
  .hero {
    min-height: 100vh;
    padding-top: 64px;
    display: grid;
    grid-template-columns: 1fr 1fr;
    border-bottom: 1px solid var(--rule);
    position: relative;
    overflow: hidden;
  }

  /* Ruled lines background */
  .hero::before {
    content: '';
    position: absolute;
    inset: 0;
    background-image: repeating-linear-gradient(
      to bottom,
      transparent 0px,
      transparent 47px,
      var(--rule) 47px,
      var(--rule) 48px
    );
    opacity: 0.35;
    pointer-events: none;
  }

  .hero-left {
    padding: 80px 56px 80px 48px;
    display: flex;
    flex-direction: column;
    justify-content: center;
    position: relative;
    z-index: 2;
    border-right: 1px solid var(--rule);
  }

  .hero-profession-tag {
    display: inline-flex;
    align-items: center;
    gap: 10px;
    font-size: 9px;
    letter-spacing: 0.3em;
    text-transform: uppercase;
    color: var(--spark);
    background: var(--spark-bg);
    border: 1px solid rgba(26,107,74,0.2);
    padding: 8px 16px;
    margin-bottom: 40px;
    width: fit-content;
    animation: fadeUp 0.8s ease 0.2s both;
  }

  .hero-profession-tag::before {
    content: '';
    width: 6px; height: 6px;
    border-radius: 50%;
    background: var(--spark-hi);
    animation: ping 2s ease-in-out infinite;
  }

  @keyframes ping {
    0%, 100% { transform: scale(1); opacity: 1; }
    50% { transform: scale(1.4); opacity: 0.6; }
  }

  .hero-title {
    font-family: 'Instrument Serif', serif;
    font-size: clamp(48px, 6vw, 84px);
    line-height: 1.0;
    letter-spacing: -0.03em;
    color: var(--ink-deep);
    margin-bottom: 32px;
    animation: fadeUp 0.8s ease 0.4s both;
  }

  .hero-title em {
    font-style: italic;
    color: var(--spark);
  }

  .hero-title .underline-word {
    position: relative;
    display: inline;
  }

  .hero-title .underline-word::after {
    content: '';
    position: absolute;
    bottom: 2px; left: 0; right: 0;
    height: 3px;
    background: var(--spark-hi);
    opacity: 0.5;
  }

  .hero-body {
    font-family: 'Instrument Serif', serif;
    font-size: 20px;
    line-height: 1.75;
    color: var(--ink-light);
    font-style: italic;
    max-width: 480px;
    margin-bottom: 48px;
    animation: fadeUp 0.8s ease 0.6s both;
  }

  .hero-stats {
    display: flex;
    gap: 0;
    border: 1px solid var(--rule);
    margin-bottom: 40px;
    animation: fadeUp 0.8s ease 0.7s both;
  }

  .hero-stat {
    flex: 1;
    padding: 20px 24px;
    border-right: 1px solid var(--rule);
  }
  .hero-stat:last-child { border-right: none; }

  .hero-stat-num {
    font-family: 'Syne', sans-serif;
    font-size: 28px;
    font-weight: 800;
    color: var(--spark);
    line-height: 1;
    margin-bottom: 4px;
  }

  .hero-stat-label {
    font-size: 9px;
    letter-spacing: 0.15em;
    text-transform: uppercase;
    color: var(--mid);
  }

  .hero-actions {
    display: flex;
    gap: 12px;
    animation: fadeUp 0.8s ease 0.9s both;
  }

  .btn-primary {
    font-family: 'IBM Plex Mono', monospace;
    font-size: 10px;
    letter-spacing: 0.15em;
    text-transform: uppercase;
    color: var(--white);
    background: var(--spark);
    padding: 16px 28px;
    border: none;
    cursor: pointer;
    text-decoration: none;
    transition: background 0.2s, transform 0.15s;
    display: inline-flex;
    align-items: center;
    gap: 10px;
  }
  .btn-primary:hover { background: var(--spark-2); transform: translateY(-1px); }

  .btn-outline {
    font-family: 'IBM Plex Mono', monospace;
    font-size: 10px;
    letter-spacing: 0.15em;
    text-transform: uppercase;
    color: var(--ink);
    background: none;
    padding: 16px 28px;
    border: 1px solid var(--rule);
    cursor: pointer;
    text-decoration: none;
    transition: border-color 0.2s, color 0.2s;
  }
  .btn-outline:hover { border-color: var(--ink); }

  /* HERO RIGHT — live preview */
  .hero-right {
    background: var(--ink-deep);
    display: flex;
    flex-direction: column;
    justify-content: center;
    padding: 60px 48px;
    position: relative;
    z-index: 2;
    overflow: hidden;
  }

  .hero-right::before {
    content: '';
    position: absolute;
    inset: 0;
    background: radial-gradient(ellipse at 30% 50%, rgba(26,107,74,0.15) 0%, transparent 60%);
    pointer-events: none;
  }

  .hero-calc-label {
    font-size: 9px;
    letter-spacing: 0.3em;
    text-transform: uppercase;
    color: var(--spark-hi);
    margin-bottom: 24px;
    display: flex;
    align-items: center;
    gap: 12px;
  }

  .hero-calc-label::before {
    content: '';
    width: 20px; height: 1px;
    background: var(--spark-hi);
  }

  /* ══════════════════════════════
     CALCULATOR INSTRUMENT
  ══════════════════════════════ */
  .calc-instrument {
    background: #1E1A14;
    border: 1px solid rgba(255,255,255,0.08);
    padding: 0;
    position: relative;
    overflow: hidden;
  }

  .calc-instrument::before {
    content: '';
    position: absolute;
    top: 0; left: 0; right: 0;
    height: 2px;
    background: linear-gradient(90deg, var(--spark), var(--spark-hi), var(--spark));
  }

  .calc-header {
    padding: 20px 24px 18px;
    border-bottom: 1px solid rgba(255,255,255,0.06);
    display: flex;
    align-items: center;
    justify-content: space-between;
  }

  .calc-title {
    font-family: 'Syne', sans-serif;
    font-size: 13px;
    font-weight: 600;
    letter-spacing: 0.05em;
    color: rgba(247,243,236,0.9);
  }

  .calc-badge {
    font-size: 8px;
    letter-spacing: 0.2em;
    text-transform: uppercase;
    color: var(--spark-hi);
    border: 1px solid rgba(34,201,122,0.3);
    padding: 4px 10px;
  }

  .calc-body {
    padding: 24px;
    display: flex;
    flex-direction: column;
    gap: 16px;
  }

  .calc-row {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 12px;
  }

  .calc-field {
    display: flex;
    flex-direction: column;
    gap: 6px;
  }

  .calc-field.full { grid-column: span 2; }

  .calc-label {
    font-size: 9px;
    letter-spacing: 0.2em;
    text-transform: uppercase;
    color: rgba(176,164,142,0.7);
  }

  .calc-input-wrap {
    position: relative;
    display: flex;
    align-items: center;
  }

  .calc-prefix {
    position: absolute;
    left: 12px;
    font-size: 13px;
    color: var(--spark-hi);
    pointer-events: none;
    font-family: 'IBM Plex Mono', monospace;
    font-weight: 400;
  }

  .calc-suffix {
    position: absolute;
    right: 12px;
    font-size: 10px;
    color: rgba(176,164,142,0.5);
    pointer-events: none;
    letter-spacing: 0.1em;
  }

  .calc-input {
    width: 100%;
    background: rgba(255,255,255,0.04);
    border: 1px solid rgba(255,255,255,0.08);
    color: var(--paper);
    font-family: 'IBM Plex Mono', monospace;
    font-size: 16px;
    font-weight: 400;
    padding: 12px 40px 12px 28px;
    outline: none;
    transition: border-color 0.2s, background 0.2s;
    -moz-appearance: textfield;
  }

  .calc-input::-webkit-outer-spin-button,
  .calc-input::-webkit-inner-spin-button { -webkit-appearance: none; }

  .calc-input:focus {
    border-color: var(--spark-hi);
    background: rgba(34,201,122,0.04);
  }

  .calc-select {
    width: 100%;
    background: rgba(255,255,255,0.04);
    border: 1px solid rgba(255,255,255,0.08);
    color: var(--paper);
    font-family: 'IBM Plex Mono', monospace;
    font-size: 12px;
    padding: 12px 16px;
    outline: none;
    cursor: pointer;
    appearance: none;
    -webkit-appearance: none;
    background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='12' height='8' viewBox='0 0 12 8'%3E%3Cpath d='M1 1l5 5 5-5' stroke='%2322C97A' stroke-width='1.5' fill='none'/%3E%3C/svg%3E");
    background-repeat: no-repeat;
    background-position: right 14px center;
    transition: border-color 0.2s;
  }
  .calc-select:focus { border-color: var(--spark-hi); }
  .calc-select option { background: #1E1A14; }

  .calc-divider {
    height: 1px;
    background: rgba(255,255,255,0.06);
    margin: 4px 0;
  }

  /* Results panel */
  .calc-results {
    background: rgba(26,107,74,0.08);
    border: 1px solid rgba(34,201,122,0.15);
    padding: 20px 24px;
    display: grid;
    gap: 12px;
  }

  .calc-result-row {
    display: flex;
    align-items: baseline;
    justify-content: space-between;
  }

  .calc-result-label {
    font-size: 9px;
    letter-spacing: 0.15em;
    text-transform: uppercase;
    color: rgba(176,164,142,0.6);
  }

  .calc-result-value {
    font-family: 'Syne', sans-serif;
    font-size: 18px;
    font-weight: 700;
    color: var(--spark-hi);
    letter-spacing: -0.01em;
  }

  .calc-result-value.secondary {
    font-size: 14px;
    color: rgba(247,243,236,0.7);
  }

  .calc-result-value.warning { color: var(--amber); }
  .calc-result-value.danger { color: #E07060; }

  .calc-result-divider {
    height: 1px;
    background: rgba(34,201,122,0.1);
  }

  .calc-result-main {
    display: flex;
    align-items: baseline;
    justify-content: space-between;
    padding-top: 8px;
  }

  .calc-result-main-label {
    font-size: 10px;
    letter-spacing: 0.2em;
    text-transform: uppercase;
    color: var(--spark-hi);
  }

  .calc-result-main-value {
    font-family: 'Syne', sans-serif;
    font-size: 32px;
    font-weight: 800;
    color: var(--spark-hi);
    letter-spacing: -0.02em;
  }

  .calc-footer {
    padding: 14px 24px;
    border-top: 1px solid rgba(255,255,255,0.06);
    display: flex;
    align-items: center;
    justify-content: space-between;
  }

  .calc-note {
    font-size: 9px;
    color: rgba(176,164,142,0.4);
    letter-spacing: 0.05em;
  }

  .calc-recalc {
    font-size: 9px;
    letter-spacing: 0.15em;
    text-transform: uppercase;
    color: var(--spark-hi);
    background: none;
    border: 1px solid rgba(34,201,122,0.3);
    padding: 6px 14px;
    cursor: pointer;
    font-family: 'IBM Plex Mono', monospace;
    transition: all 0.2s;
  }
  .calc-recalc:hover { background: rgba(34,201,122,0.08); }

  /* ══════════════════════════════
     TOOLKIT SECTION
  ══════════════════════════════ */
  .toolkit-section {
    border-bottom: 1px solid var(--rule);
  }

  .section-head {
    max-width: 1400px;
    margin: 0 auto;
    padding: 64px 48px 48px;
    display: flex;
    align-items: baseline;
    justify-content: space-between;
    border-bottom: 1px solid var(--rule);
  }

  .section-eyebrow {
    font-size: 9px;
    letter-spacing: 0.3em;
    text-transform: uppercase;
    color: var(--spark);
    margin-bottom: 12px;
    display: flex;
    align-items: center;
    gap: 10px;
  }
  .section-eyebrow::before { content: ''; width: 20px; height: 1px; background: var(--spark); }

  .section-title {
    font-family: 'Instrument Serif', serif;
    font-size: 42px;
    letter-spacing: -0.02em;
    color: var(--ink-deep);
    line-height: 1.1;
  }

  .section-title em { font-style: italic; color: var(--spark); }

  .section-note {
    font-size: 10px;
    letter-spacing: 0.1em;
    color: var(--mid);
    text-align: right;
    max-width: 200px;
  }

  /* CALC TABS */
  .calc-tabs {
    max-width: 1400px;
    margin: 0 auto;
    display: flex;
    border-bottom: 1px solid var(--rule);
    overflow-x: auto;
    scrollbar-width: none;
  }
  .calc-tabs::-webkit-scrollbar { display: none; }

  .calc-tab {
    flex-shrink: 0;
    padding: 16px 32px;
    font-size: 10px;
    letter-spacing: 0.15em;
    text-transform: uppercase;
    color: var(--mid);
    cursor: pointer;
    border-right: 1px solid var(--rule);
    border-bottom: 2px solid transparent;
    transition: all 0.2s;
    background: none;
    font-family: 'IBM Plex Mono', monospace;
    white-space: nowrap;
  }

  .calc-tab:hover { color: var(--ink); background: var(--paper-2); }
  .calc-tab.active { color: var(--spark); border-bottom-color: var(--spark); background: var(--spark-bg); }

  /* CALC PANELS */
  .calc-panels {
    max-width: 1400px;
    margin: 0 auto;
  }

  .calc-panel { display: none; }
  .calc-panel.active { display: block; }

  .calc-panel-inner {
    display: grid;
    grid-template-columns: 1fr 1fr;
    border-bottom: 1px solid var(--rule);
  }

  .calc-panel-left {
    padding: 56px 48px;
    border-right: 1px solid var(--rule);
  }

  .calc-panel-right {
    padding: 56px 48px;
    background: var(--paper-2);
  }

  .calc-panel-title {
    font-family: 'Instrument Serif', serif;
    font-size: 32px;
    letter-spacing: -0.02em;
    color: var(--ink-deep);
    margin-bottom: 12px;
    line-height: 1.1;
  }

  .calc-panel-title em { font-style: italic; color: var(--spark); }

  .calc-panel-desc {
    font-family: 'Instrument Serif', serif;
    font-style: italic;
    font-size: 16px;
    line-height: 1.7;
    color: var(--ink-light);
    margin-bottom: 32px;
    font-weight: 300;
  }

  /* FULL CALCULATOR WIDGET (light version) */
  .calc-widget {
    background: var(--white);
    border: 1px solid var(--rule);
    overflow: hidden;
    position: relative;
  }

  .calc-widget::before {
    content: '';
    position: absolute;
    top: 0; left: 0; right: 0;
    height: 3px;
    background: linear-gradient(90deg, var(--spark), var(--spark-hi));
  }

  .cw-header {
    padding: 18px 24px;
    border-bottom: 1px solid var(--rule);
    display: flex;
    align-items: center;
    justify-content: space-between;
    background: var(--paper-2);
  }

  .cw-title {
    font-family: 'Syne', sans-serif;
    font-size: 12px;
    font-weight: 600;
    letter-spacing: 0.05em;
    color: var(--ink-deep);
  }

  .cw-uk-badge {
    font-size: 8px;
    letter-spacing: 0.2em;
    text-transform: uppercase;
    color: var(--spark);
    border: 1px solid rgba(26,107,74,0.25);
    padding: 4px 10px;
    background: var(--spark-bg);
  }

  .cw-body {
    padding: 24px;
    display: flex;
    flex-direction: column;
    gap: 14px;
  }

  .cw-field {
    display: flex;
    flex-direction: column;
    gap: 6px;
  }

  .cw-label {
    font-size: 9px;
    letter-spacing: 0.2em;
    text-transform: uppercase;
    color: var(--ink-light);
  }

  .cw-input-wrap { position: relative; }

  .cw-prefix {
    position: absolute;
    left: 12px; top: 50%;
    transform: translateY(-50%);
    font-size: 14px;
    color: var(--spark);
    font-family: 'IBM Plex Mono', monospace;
    pointer-events: none;
  }

  .cw-suffix {
    position: absolute;
    right: 12px; top: 50%;
    transform: translateY(-50%);
    font-size: 9px;
    color: var(--mid);
    pointer-events: none;
    letter-spacing: 0.1em;
    text-transform: uppercase;
  }

  .cw-input {
    width: 100%;
    background: var(--paper);
    border: 1px solid var(--rule);
    color: var(--ink-deep);
    font-family: 'IBM Plex Mono', monospace;
    font-size: 18px;
    font-weight: 400;
    padding: 12px 48px 12px 32px;
    outline: none;
    transition: border-color 0.2s, background 0.2s;
    -moz-appearance: textfield;
  }
  .cw-input::-webkit-outer-spin-button,
  .cw-input::-webkit-inner-spin-button { -webkit-appearance: none; }
  .cw-input:focus { border-color: var(--spark); background: var(--white); }

  .cw-select {
    width: 100%;
    background: var(--paper);
    border: 1px solid var(--rule);
    color: var(--ink-deep);
    font-family: 'IBM Plex Mono', monospace;
    font-size: 13px;
    padding: 12px 40px 12px 16px;
    outline: none;
    cursor: pointer;
    appearance: none;
    -webkit-appearance: none;
    background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='12' height='8' viewBox='0 0 12 8'%3E%3Cpath d='M1 1l5 5 5-5' stroke='%231A6B4A' stroke-width='1.5' fill='none'/%3E%3C/svg%3E");
    background-repeat: no-repeat;
    background-position: right 14px center;
    transition: border-color 0.2s;
  }
  .cw-select:focus { border-color: var(--spark); }

  .cw-row { display: grid; grid-template-columns: 1fr 1fr; gap: 12px; }
  .cw-divider { height: 1px; background: var(--rule); margin: 4px 0; }

  .cw-results {
    margin: 0 24px 24px;
    background: var(--spark-bg);
    border: 1px solid rgba(26,107,74,0.15);
    padding: 20px 24px;
  }

  .cw-result-grid {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 16px;
    margin-bottom: 16px;
  }

  .cw-result-item {}

  .cw-result-label {
    font-size: 8px;
    letter-spacing: 0.2em;
    text-transform: uppercase;
    color: var(--ink-light);
    margin-bottom: 4px;
  }

  .cw-result-val {
    font-family: 'Syne', sans-serif;
    font-size: 20px;
    font-weight: 700;
    color: var(--spark);
    letter-spacing: -0.01em;
  }

  .cw-result-val.neutral { color: var(--ink-deep); }
  .cw-result-val.warn { color: var(--amber); }

  .cw-result-main-row {
    border-top: 1px solid rgba(26,107,74,0.15);
    padding-top: 16px;
    display: flex;
    align-items: baseline;
    justify-content: space-between;
  }

  .cw-result-main-label {
    font-size: 10px;
    letter-spacing: 0.2em;
    text-transform: uppercase;
    color: var(--spark);
  }

  .cw-result-main-val {
    font-family: 'Syne', sans-serif;
    font-size: 36px;
    font-weight: 800;
    color: var(--spark);
    letter-spacing: -0.02em;
  }

  .cw-footer {
    padding: 14px 24px;
    border-top: 1px solid var(--rule);
    display: flex;
    align-items: center;
    justify-content: space-between;
    background: var(--paper-2);
  }

  .cw-note {
    font-size: 9px;
    color: var(--mid);
    letter-spacing: 0.05em;
  }

  /* How it works on panel right */
  .how-it-works {
    display: flex;
    flex-direction: column;
    gap: 1px;
    background: var(--rule);
    margin-bottom: 32px;
  }

  .hiw-step {
    background: var(--paper-2);
    padding: 24px 28px;
    display: flex;
    gap: 20px;
    align-items: flex-start;
    transition: background 0.2s;
  }
  .hiw-step:hover { background: var(--white); }

  .hiw-num {
    font-family: 'Instrument Serif', serif;
    font-size: 32px;
    color: var(--rule);
    line-height: 1;
    flex-shrink: 0;
    width: 36px;
  }

  .hiw-content h4 {
    font-family: 'Syne', sans-serif;
    font-size: 13px;
    font-weight: 600;
    color: var(--ink-deep);
    margin-bottom: 6px;
    letter-spacing: 0.02em;
  }

  .hiw-content p {
    font-family: 'Instrument Serif', serif;
    font-size: 15px;
    line-height: 1.6;
    color: var(--ink-light);
    font-style: italic;
    font-weight: 300;
  }

  /* Formula display */
  .formula-box {
    background: var(--ink-deep);
    padding: 20px 24px;
    font-family: 'IBM Plex Mono', monospace;
    font-size: 12px;
    color: var(--spark-hi);
    line-height: 2;
    position: relative;
    overflow: hidden;
  }

  .formula-box::before {
    content: 'FORMULA';
    position: absolute;
    top: 12px; right: 16px;
    font-size: 8px;
    letter-spacing: 0.2em;
    color: rgba(255,255,255,0.2);
  }

  .formula-comment { color: rgba(176,164,142,0.4); }
  .formula-var { color: var(--paper); }
  .formula-op { color: rgba(255,255,255,0.3); }

  /* ══════════════════════════════
     PROFESSIONS SECTION
  ══════════════════════════════ */
  .professions-section {
    border-bottom: 1px solid var(--rule);
    background: var(--ink-deep);
  }

  .professions-inner {
    max-width: 1400px;
    margin: 0 auto;
    padding: 80px 48px;
  }

  .professions-header {
    display: flex;
    align-items: baseline;
    justify-content: space-between;
    margin-bottom: 48px;
    padding-bottom: 24px;
    border-bottom: 1px solid rgba(255,255,255,0.08);
  }

  .professions-title {
    font-family: 'Instrument Serif', serif;
    font-size: 42px;
    color: var(--paper);
    letter-spacing: -0.02em;
  }

  .professions-title em { font-style: italic; color: var(--spark-hi); }

  .professions-note {
    font-size: 10px;
    letter-spacing: 0.1em;
    color: rgba(176,164,142,0.5);
  }

  .professions-grid {
    display: grid;
    grid-template-columns: repeat(4, 1fr);
    gap: 2px;
    background: rgba(255,255,255,0.05);
  }

  .profession-card {
    background: var(--ink-deep);
    padding: 32px 28px;
    cursor: pointer;
    transition: background 0.2s;
    position: relative;
    overflow: hidden;
    text-decoration: none;
    display: block;
  }

  .profession-card:hover { background: #221E16; }

  .profession-card.active-profession {
    background: rgba(26,107,74,0.12);
    border-left: 2px solid var(--spark);
  }

  .profession-card::after {
    content: '';
    position: absolute;
    bottom: 0; left: 0; right: 0;
    height: 1px;
    background: linear-gradient(90deg, transparent, var(--spark-hi), transparent);
    transform: scaleX(0);
    transition: transform 0.4s;
  }

  .profession-card:hover::after { transform: scaleX(1); }

  .profession-icon {
    font-size: 28px;
    margin-bottom: 16px;
    filter: grayscale(20%);
  }

  .profession-name {
    font-family: 'Syne', sans-serif;
    font-size: 16px;
    font-weight: 700;
    color: var(--paper);
    margin-bottom: 8px;
    letter-spacing: 0.02em;
  }

  .profession-count {
    font-size: 9px;
    letter-spacing: 0.15em;
    text-transform: uppercase;
    color: rgba(176,164,142,0.5);
    margin-bottom: 12px;
  }

  .profession-tag {
    font-size: 8px;
    letter-spacing: 0.2em;
    text-transform: uppercase;
    padding: 4px 10px;
    border-radius: 0;
    display: inline-block;
  }

  .profession-tag.live {
    color: var(--spark-hi);
    border: 1px solid rgba(34,201,122,0.3);
    background: rgba(34,201,122,0.06);
  }

  .profession-tag.soon {
    color: rgba(176,164,142,0.5);
    border: 1px solid rgba(176,164,142,0.15);
  }

  /* ══════════════════════════════
     PHILOSOPHY STRIP
  ══════════════════════════════ */
  .philosophy {
    border-bottom: 1px solid var(--rule);
    background: var(--paper-2);
  }

  .philosophy-inner {
    max-width: 1400px;
    margin: 0 auto;
    display: grid;
    grid-template-columns: repeat(3, 1fr);
    border-left: none;
  }

  .philosophy-item {
    padding: 64px 48px;
    border-right: 1px solid var(--rule);
  }
  .philosophy-item:last-child { border-right: none; }

  .philosophy-num {
    font-family: 'Instrument Serif', serif;
    font-size: 72px;
    color: var(--rule);
    line-height: 1;
    margin-bottom: 24px;
  }

  .philosophy-title {
    font-family: 'Syne', sans-serif;
    font-size: 17px;
    font-weight: 700;
    color: var(--ink-deep);
    margin-bottom: 16px;
    letter-spacing: 0.02em;
  }

  .philosophy-body {
    font-family: 'Instrument Serif', serif;
    font-size: 17px;
    line-height: 1.75;
    color: var(--ink-light);
    font-style: italic;
    font-weight: 300;
  }

  /* ══════════════════════════════
     FOOTER
  ══════════════════════════════ */
  footer {
    border-top: 1px solid var(--rule);
    background: var(--ink-deep);
  }

  .footer-inner {
    max-width: 1400px;
    margin: 0 auto;
    display: flex;
    align-items: center;
    justify-content: space-between;
    padding: 32px 48px;
    border-bottom: 1px solid rgba(255,255,255,0.06);
  }

  .footer-brand {
    font-family: 'Instrument Serif', serif;
    font-size: 22px;
    color: var(--paper);
    letter-spacing: -0.02em;
  }

  .footer-brand em { font-style: italic; color: var(--spark-hi); }

  .footer-note {
    font-size: 9px;
    letter-spacing: 0.15em;
    text-transform: uppercase;
    color: rgba(176,164,142,0.4);
  }

  .footer-disclaimer {
    max-width: 1400px;
    margin: 0 auto;
    padding: 20px 48px;
    font-size: 10px;
    color: rgba(176,164,142,0.3);
    line-height: 1.6;
    letter-spacing: 0.03em;
  }

  /* ══════════════════════════════
     ANIMATIONS
  ══════════════════════════════ */
  @keyframes fadeUp {
    from { opacity: 0; transform: translateY(24px); }
    to { opacity: 1; transform: translateY(0); }
  }

  .reveal {
    opacity: 0;
    transform: translateY(20px);
    transition: opacity 0.6s ease, transform 0.6s ease;
  }
  .reveal.visible { opacity: 1; transform: translateY(0); }

  ::-webkit-scrollbar { width: 4px; height: 4px; }
  ::-webkit-scrollbar-track { background: var(--paper); }
  ::-webkit-scrollbar-thumb { background: var(--rule); }

  @media (max-width: 900px) {
    .hero { grid-template-columns: 1fr; }
    .hero-right { display: none; }
    .calc-panel-inner { grid-template-columns: 1fr; }
    .professions-grid { grid-template-columns: 1fr 1fr; }
    .philosophy-inner { grid-template-columns: 1fr; }
    nav .nav-links { display: none; }
  }
</style>
</head>
<body>

<!-- NAV -->
<nav>
  <a class="nav-brand" href="#">
    <span class="nav-logo">Spent<em>iq</em></span>
    <span class="nav-tagline">Visual Calculators</span>
  </a>
  <ul class="nav-links">
    <li><a href="#toolkit">Toolkit</a></li>
    <li><a href="#professions">Professions</a></li>
    <li><a href="#about">About</a></li>
  </ul>
  <a href="#toolkit" class="nav-cta">Open Toolkit →</a>
</nav>

<!-- ══════ HERO ══════ -->
<section class="hero">
  <div class="hero-left">
    <div class="hero-profession-tag">UK Recruitment · Live Now</div>

    <h1 class="hero-title">
      Skip the maths.<br>
      <em>Get back to the <span class="underline-word">good bit.</span></em>
    </h1>

    <p class="hero-body">
      Visual calculators built for people who are brilliant at their job — and don't need a spreadsheet between them and doing it.
    </p>

    <div class="hero-stats">
      <div class="hero-stat">
        <div class="hero-stat-num">8</div>
        <div class="hero-stat-label">Calculators</div>
      </div>
      <div class="hero-stat">
        <div class="hero-stat-num">0</div>
        <div class="hero-stat-label">Sign-ups needed</div>
      </div>
      <div class="hero-stat">
        <div class="hero-stat-num">2–3</div>
        <div class="hero-stat-label">Inputs max</div>
      </div>
    </div>

    <div class="hero-actions">
      <a href="#toolkit" class="btn-primary">Open the Toolkit →</a>
      <a href="#professions" class="btn-outline">More Professions</a>
    </div>
  </div>

  <!-- HERO LIVE CALC -->
  <div class="hero-right">
    <div class="hero-calc-label">Live Calculator — Try it now</div>

    <div class="calc-instrument" id="hero-calc">
      <div class="calc-header">
        <div class="calc-title">Contractor Margin Checker</div>
        <div class="calc-badge">UK Recruitment</div>
      </div>
      <div class="calc-body">
        <div class="calc-row">
          <div class="calc-field">
            <div class="calc-label">Charge Rate</div>
            <div class="calc-input-wrap">
              <span class="calc-prefix">£</span>
              <input class="calc-input" type="number" id="h-charge" value="450" step="10" oninput="calcHeroMargin()">
              <span class="calc-suffix">/day</span>
            </div>
          </div>
          <div class="calc-field">
            <div class="calc-label">Pay Rate</div>
            <div class="calc-input-wrap">
              <span class="calc-prefix">£</span>
              <input class="calc-input" type="number" id="h-pay" value="350" step="10" oninput="calcHeroMargin()">
              <span class="calc-suffix">/day</span>
            </div>
          </div>
        </div>
        <div class="calc-row">
          <div class="calc-field">
            <div class="calc-label">Days / Week</div>
            <div class="calc-input-wrap">
              <input class="calc-input" type="number" id="h-days" value="5" min="1" max="7" style="padding-left:16px" oninput="calcHeroMargin()">
              <span class="calc-suffix">days</span>
            </div>
          </div>
          <div class="calc-field">
            <div class="calc-label">Contract Length</div>
            <div class="calc-input-wrap">
              <input class="calc-input" type="number" id="h-weeks" value="12" style="padding-left:16px" oninput="calcHeroMargin()">
              <span class="calc-suffix">weeks</span>
            </div>
          </div>
        </div>
        <div class="calc-divider"></div>
        <div class="calc-results" id="hero-results">
          <!-- Populated by JS -->
        </div>
      </div>
      <div class="calc-footer">
        <span class="calc-note">Exc. employer NI & holiday pay</span>
        <button class="calc-recalc" onclick="calcHeroMargin()">Recalculate</button>
      </div>
    </div>
  </div>
</section>

<!-- ══════ TOOLKIT ══════ -->
<section class="toolkit-section" id="toolkit">
  <div class="section-head">
    <div>
      <div class="section-eyebrow">UK Recruitment Toolkit</div>
      <h2 class="section-title">Every calculation<br>you reach for <em>daily.</em></h2>
    </div>
    <div class="section-note">8 calculators · No sign-up · Free forever</div>
  </div>

  <!-- TABS -->
  <div class="calc-tabs">
    <button class="calc-tab active" onclick="switchCalc(this,'margin')">Contractor Margin</button>
    <button class="calc-tab" onclick="switchCalc(this,'perm')">Perm Fee</button>
    <button class="calc-tab" onclick="switchCalc(this,'dayrate')">Salary → Day Rate</button>
    <button class="calc-tab" onclick="switchCalc(this,'holiday')">Holiday Pay</button>
    <button class="calc-tab" onclick="switchCalc(this,'rebate')">Rebate Window</button>
    <button class="calc-tab" onclick="switchCalc(this,'umbrella')">Umbrella Take-Home</button>
  </div>

  <!-- PANELS -->
  <div class="calc-panels">

    <!-- MARGIN CALC -->
    <div class="calc-panel active" id="panel-margin">
      <div class="calc-panel-inner">
        <div class="calc-panel-left">
          <div class="calc-panel-title">Contractor<br><em>Margin Calculator</em></div>
          <p class="calc-panel-desc">Enter the charge rate and pay rate — see your margin in £ per day, per week, and across the full contract instantly.</p>

          <div class="calc-widget">
            <div class="cw-header">
              <div class="cw-title">Contractor Margin</div>
              <div class="cw-uk-badge">UK · 2024/25</div>
            </div>
            <div class="cw-body">
              <div class="cw-row">
                <div class="cw-field">
                  <div class="cw-label">Charge Rate (£/day)</div>
                  <div class="cw-input-wrap">
                    <span class="cw-prefix">£</span>
                    <input class="cw-input" type="number" id="m-charge" value="450" step="5" oninput="calcMargin()">
                  </div>
                </div>
                <div class="cw-field">
                  <div class="cw-label">Pay Rate (£/day)</div>
                  <div class="cw-input-wrap">
                    <span class="cw-prefix">£</span>
                    <input class="cw-input" type="number" id="m-pay" value="350" step="5" oninput="calcMargin()">
                  </div>
                </div>
              </div>
              <div class="cw-row">
                <div class="cw-field">
                  <div class="cw-label">Days per Week</div>
                  <div class="cw-input-wrap">
                    <input class="cw-input" type="number" id="m-days" value="5" min="1" max="7" style="padding-left:16px" oninput="calcMargin()">
                    <span class="cw-suffix">days</span>
                  </div>
                </div>
                <div class="cw-field">
                  <div class="cw-label">Contract Weeks</div>
                  <div class="cw-input-wrap">
                    <input class="cw-input" type="number" id="m-weeks" value="12" style="padding-left:16px" oninput="calcMargin()">
                    <span class="cw-suffix">wks</span>
                  </div>
                </div>
              </div>
              <div class="cw-divider"></div>
              <div class="cw-field">
                <div class="cw-label">Include Employer NI? (13.8% above £9,100)</div>
                <select class="cw-select" id="m-eni" onchange="calcMargin()">
                  <option value="no">No — show gross margin</option>
                  <option value="yes">Yes — deduct Employer NI</option>
                </select>
              </div>
            </div>
            <div class="cw-results" id="margin-results"></div>
            <div class="cw-footer">
              <span class="cw-note">Based on UK 2024/25 NI thresholds</span>
            </div>
          </div>
        </div>

        <div class="calc-panel-right reveal">
          <div class="section-eyebrow" style="margin-bottom:24px">How it works</div>
          <div class="how-it-works">
            <div class="hiw-step">
              <div class="hiw-num">1</div>
              <div class="hiw-content">
                <h4>Enter charge & pay rates</h4>
                <p>The day rate you bill the client, and the day rate you pay your contractor.</p>
              </div>
            </div>
            <div class="hiw-step">
              <div class="hiw-num">2</div>
              <div class="hiw-content">
                <h4>Set the contract parameters</h4>
                <p>Days per week and contract length. Typical contracts run 3–6 months.</p>
              </div>
            </div>
            <div class="hiw-step">
              <div class="hiw-num">3</div>
              <div class="hiw-content">
                <h4>See your margin instantly</h4>
                <p>Daily margin, weekly margin, and total contract value — updated live as you type.</p>
              </div>
            </div>
          </div>
          <div class="formula-box">
            <span class="formula-comment">// Gross margin</span><br>
            <span class="formula-var">margin_day</span> <span class="formula-op">=</span> charge_rate <span class="formula-op">-</span> pay_rate<br>
            <span class="formula-var">margin_pct</span> <span class="formula-op">=</span> (margin_day / charge_rate) × 100<br>
            <br>
            <span class="formula-comment">// Employer NI (if applicable)</span><br>
            <span class="formula-var">eni</span> <span class="formula-op">=</span> MAX(0, (pay_rate × days - 175) × 0.138)<br>
            <span class="formula-var">net_margin</span> <span class="formula-op">=</span> margin_day <span class="formula-op">-</span> (eni / days)
          </div>
        </div>
      </div>
    </div>

    <!-- PERM FEE CALC -->
    <div class="calc-panel" id="panel-perm">
      <div class="calc-panel-inner">
        <div class="calc-panel-left">
          <div class="calc-panel-title">Permanent Placement<br><em>Fee Calculator</em></div>
          <p class="calc-panel-desc">Calculate your placement fee from a salary and percentage, with split-fee and rebate-net figures included.</p>
          <div class="calc-widget">
            <div class="cw-header">
              <div class="cw-title">Perm Placement Fee</div>
              <div class="cw-uk-badge">UK Recruitment</div>
            </div>
            <div class="cw-body">
              <div class="cw-field">
                <div class="cw-label">Candidate Annual Salary (£)</div>
                <div class="cw-input-wrap">
                  <span class="cw-prefix">£</span>
                  <input class="cw-input" type="number" id="p-salary" value="55000" step="1000" oninput="calcPerm()">
                </div>
              </div>
              <div class="cw-row">
                <div class="cw-field">
                  <div class="cw-label">Fee % of Salary</div>
                  <div class="cw-input-wrap">
                    <input class="cw-input" type="number" id="p-pct" value="15" step="0.5" style="padding-left:16px" oninput="calcPerm()">
                    <span class="cw-suffix">%</span>
                  </div>
                </div>
                <div class="cw-field">
                  <div class="cw-label">Split Fee? (%)</div>
                  <div class="cw-input-wrap">
                    <input class="cw-input" type="number" id="p-split" value="0" step="5" style="padding-left:16px" oninput="calcPerm()">
                    <span class="cw-suffix">% out</span>
                  </div>
                </div>
              </div>
              <div class="cw-divider"></div>
              <div class="cw-field">
                <div class="cw-label">Rebate Period</div>
                <select class="cw-select" id="p-rebate" onchange="calcPerm()">
                  <option value="0">No rebate</option>
                  <option value="4">4 weeks (100%)</option>
                  <option value="8">8 weeks sliding scale</option>
                  <option value="12">12 weeks sliding scale</option>
                </select>
              </div>
            </div>
            <div class="cw-results" id="perm-results"></div>
            <div class="cw-footer">
              <span class="cw-note">Exc. VAT · Consult your contract terms</span>
            </div>
          </div>
        </div>
        <div class="calc-panel-right reveal">
          <div class="section-eyebrow" style="margin-bottom:24px">Placement fees explained</div>
          <div class="how-it-works">
            <div class="hiw-step">
              <div class="hiw-num">1</div>
              <div class="hiw-content">
                <h4>Enter the salary</h4>
                <p>The agreed annual salary the candidate will receive in their new role.</p>
              </div>
            </div>
            <div class="hiw-step">
              <div class="hiw-num">2</div>
              <div class="hiw-content">
                <h4>Set your fee percentage</h4>
                <p>Typically 12–20% for permanent roles. Senior or specialist roles often command higher.</p>
              </div>
            </div>
            <div class="hiw-step">
              <div class="hiw-num">3</div>
              <div class="hiw-content">
                <h4>Add splits & rebates</h4>
                <p>If splitting with another consultant or desk, enter the outgoing %. Rebate periods reduce the figure you keep if the candidate leaves early.</p>
              </div>
            </div>
          </div>
          <div class="formula-box">
            <span class="formula-comment">// Gross fee</span><br>
            <span class="formula-var">fee</span> <span class="formula-op">=</span> salary × (pct / 100)<br>
            <br>
            <span class="formula-comment">// After split</span><br>
            <span class="formula-var">net_fee</span> <span class="formula-op">=</span> fee × (1 - split_pct / 100)<br>
            <br>
            <span class="formula-comment">// Rebate risk (sliding)</span><br>
            <span class="formula-var">at_risk</span> <span class="formula-op">=</span> fee × rebate_factor
          </div>
        </div>
      </div>
    </div>

    <!-- DAY RATE CALC -->
    <div class="calc-panel" id="panel-dayrate">
      <div class="calc-panel-inner">
        <div class="calc-panel-left">
          <div class="calc-panel-title">Salary to<br><em>Day Rate Converter</em></div>
          <p class="calc-panel-desc">Convert an annual salary to a contractor day rate — and back again. Includes uplift for holiday, pension and NI the contractor must now fund themselves.</p>
          <div class="calc-widget">
            <div class="cw-header">
              <div class="cw-title">Salary ↔ Day Rate</div>
              <div class="cw-uk-badge">UK 2024/25</div>
            </div>
            <div class="cw-body">
              <div class="cw-field">
                <div class="cw-label">Annual Salary (£)</div>
                <div class="cw-input-wrap">
                  <span class="cw-prefix">£</span>
                  <input class="cw-input" type="number" id="dr-salary" value="65000" step="1000" oninput="calcDayRate()">
                </div>
              </div>
              <div class="cw-row">
                <div class="cw-field">
                  <div class="cw-label">Working Days/Year</div>
                  <div class="cw-input-wrap">
                    <input class="cw-input" type="number" id="dr-days" value="230" style="padding-left:16px" oninput="calcDayRate()">
                  </div>
                </div>
                <div class="cw-field">
                  <div class="cw-label">Uplift for Benefits</div>
                  <select class="cw-select" id="dr-uplift" onchange="calcDayRate()">
                    <option value="1.0">None (bare day rate)</option>
                    <option value="1.15" selected>+15% (standard)</option>
                    <option value="1.20">+20% (pension/hols)</option>
                    <option value="1.25">+25% (full benefits)</option>
                  </select>
                </div>
              </div>
            </div>
            <div class="cw-results" id="dayrate-results"></div>
            <div class="cw-footer">
              <span class="cw-note">230 working days = 52wks less 28 days leave</span>
            </div>
          </div>
        </div>
        <div class="calc-panel-right reveal">
          <div class="section-eyebrow" style="margin-bottom:24px">Why the uplift matters</div>
          <div class="how-it-works">
            <div class="hiw-step">
              <div class="hiw-num">1</div>
              <div class="hiw-content"><h4>Bare day rate</h4><p>Salary ÷ 230 working days. Doesn't account for benefits a PAYE employee receives automatically.</p></div>
            </div>
            <div class="hiw-step">
              <div class="hiw-num">2</div>
              <div class="hiw-content"><h4>The missing benefits</h4><p>Holiday pay, employer pension contributions, sick pay, equipment — a contractor funds these from their rate.</p></div>
            </div>
            <div class="hiw-step">
              <div class="hiw-num">3</div>
              <div class="hiw-content"><h4>The fair rate</h4><p>+15–25% uplift gives a like-for-like comparison. Use this when advising candidates moving from PAYE to contract.</p></div>
            </div>
          </div>
          <div class="formula-box">
            <span class="formula-comment">// Base day rate</span><br>
            <span class="formula-var">day_rate</span> <span class="formula-op">=</span> salary / working_days<br>
            <br>
            <span class="formula-comment">// With uplift</span><br>
            <span class="formula-var">fair_rate</span> <span class="formula-op">=</span> day_rate × uplift_factor<br>
            <br>
            <span class="formula-comment">// Annual contract value</span><br>
            <span class="formula-var">contract_val</span> <span class="formula-op">=</span> fair_rate × working_days
          </div>
        </div>
      </div>
    </div>

    <!-- HOLIDAY PAY -->
    <div class="calc-panel" id="panel-holiday">
      <div class="calc-panel-inner">
        <div class="calc-panel-left">
          <div class="calc-panel-title">Holiday Pay<br><em>Accrual Calculator</em></div>
          <p class="calc-panel-desc">For PAYE contractors working through an agency — calculate the statutory holiday pay accruing on their assignments under UK Working Time Regulations.</p>
          <div class="calc-widget">
            <div class="cw-header">
              <div class="cw-title">Holiday Pay Accrual</div>
              <div class="cw-uk-badge">WTR 1998</div>
            </div>
            <div class="cw-body">
              <div class="cw-field">
                <div class="cw-label">Day Rate (£/day)</div>
                <div class="cw-input-wrap">
                  <span class="cw-prefix">£</span>
                  <input class="cw-input" type="number" id="hol-rate" value="350" step="10" oninput="calcHoliday()">
                </div>
              </div>
              <div class="cw-row">
                <div class="cw-field">
                  <div class="cw-label">Days Worked</div>
                  <div class="cw-input-wrap">
                    <input class="cw-input" type="number" id="hol-days" value="60" style="padding-left:16px" oninput="calcHoliday()">
                  </div>
                </div>
                <div class="cw-field">
                  <div class="cw-label">Holiday Model</div>
                  <select class="cw-select" id="hol-model" onchange="calcHoliday()">
                    <option value="rolled">Rolled Up (12.07%)</option>
                    <option value="accrued" selected>Accrued (28 days/yr)</option>
                  </select>
                </div>
              </div>
            </div>
            <div class="cw-results" id="holiday-results"></div>
            <div class="cw-footer">
              <span class="cw-note">UK statutory minimum · 12.07% of pay</span>
            </div>
          </div>
        </div>
        <div class="calc-panel-right reveal">
          <div class="section-eyebrow" style="margin-bottom:24px">Holiday pay — the key facts</div>
          <div class="how-it-works">
            <div class="hiw-step"><div class="hiw-num">1</div><div class="hiw-content"><h4>28 days statutory minimum</h4><p>UK workers are entitled to 28 days paid leave per year under the Working Time Regulations 1998.</p></div></div>
            <div class="hiw-step"><div class="hiw-num">2</div><div class="hiw-content"><h4>12.07% rule</h4><p>For variable-hours workers, 12.07% of all pay earned is the equivalent of 28 days' holiday. Simple and auditable.</p></div></div>
            <div class="hiw-step"><div class="hiw-num">3</div><div class="hiw-content"><h4>Rolled up vs accrued</h4><p>Rolled up adds 12.07% to each payment. Accrued builds a pot paid out when holiday is taken or contract ends.</p></div></div>
          </div>
          <div class="formula-box">
            <span class="formula-comment">// 12.07% method</span><br>
            <span class="formula-var">hol_pay</span> <span class="formula-op">=</span> (days_worked × day_rate) × 0.1207<br>
            <br>
            <span class="formula-comment">// Accrued days</span><br>
            <span class="formula-var">hol_days</span> <span class="formula-op">=</span> days_worked × (28 / 260)<br>
            <span class="formula-var">hol_value</span> <span class="formula-op">=</span> hol_days × day_rate
          </div>
        </div>
      </div>
    </div>

    <!-- REBATE WINDOW -->
    <div class="calc-panel" id="panel-rebate">
      <div class="calc-panel-inner">
        <div class="calc-panel-left">
          <div class="calc-panel-title">Rebate Window<br><em>Calculator</em></div>
          <p class="calc-panel-desc">If a permanent candidate leaves within your rebate period, how much do you owe back? Calculate the sliding-scale rebate on any placement fee.</p>
          <div class="calc-widget">
            <div class="cw-header">
              <div class="cw-title">Perm Rebate Calculator</div>
              <div class="cw-uk-badge">Sliding Scale</div>
            </div>
            <div class="cw-body">
              <div class="cw-row">
                <div class="cw-field">
                  <div class="cw-label">Original Fee (£)</div>
                  <div class="cw-input-wrap">
                    <span class="cw-prefix">£</span>
                    <input class="cw-input" type="number" id="rb-fee" value="9000" step="100" oninput="calcRebate()">
                  </div>
                </div>
                <div class="cw-field">
                  <div class="cw-label">Weeks in Role</div>
                  <div class="cw-input-wrap">
                    <input class="cw-input" type="number" id="rb-weeks" value="6" style="padding-left:16px" oninput="calcRebate()">
                    <span class="cw-suffix">wks</span>
                  </div>
                </div>
              </div>
              <div class="cw-field">
                <div class="cw-label">Rebate Terms</div>
                <select class="cw-select" id="rb-terms" onchange="calcRebate()">
                  <option value="4-100">4 weeks: 100% back</option>
                  <option value="8-sliding" selected>8 weeks: 100/50/25 sliding</option>
                  <option value="12-sliding">12 weeks: 100/75/50/25 sliding</option>
                  <option value="custom-50">Custom: 50% flat</option>
                </select>
              </div>
            </div>
            <div class="cw-results" id="rebate-results"></div>
            <div class="cw-footer">
              <span class="cw-note">Always verify against your signed terms</span>
            </div>
          </div>
        </div>
        <div class="calc-panel-right reveal">
          <div class="section-eyebrow" style="margin-bottom:24px">How sliding rebates work</div>
          <div class="how-it-works">
            <div class="hiw-step"><div class="hiw-num">1</div><div class="hiw-content"><h4>Full rebate window</h4><p>If the candidate leaves in the first quarter of the rebate period, typically 100% of the fee is returned.</p></div></div>
            <div class="hiw-step"><div class="hiw-num">2</div><div class="hiw-content"><h4>Sliding scale</h4><p>The longer they stay, the less you owe. Common structures drop to 50%, then 25% as the weeks pass.</p></div></div>
            <div class="hiw-step"><div class="hiw-num">3</div><div class="hiw-content"><h4>Replacement clause</h4><p>Many terms offer a replacement candidate rather than cash back — factor this into your client conversation early.</p></div></div>
          </div>
          <div class="formula-box">
            <span class="formula-comment">// 8-week sliding example</span><br>
            <span class="formula-var">weeks 1–2</span> <span class="formula-op">→</span>  100% rebate<br>
            <span class="formula-var">weeks 3–4</span> <span class="formula-op">→</span>   75% rebate<br>
            <span class="formula-var">weeks 5–6</span> <span class="formula-op">→</span>   50% rebate<br>
            <span class="formula-var">weeks 7–8</span> <span class="formula-op">→</span>   25% rebate<br>
            <span class="formula-var">week 9+</span>   <span class="formula-op">→</span>    0% rebate
          </div>
        </div>
      </div>
    </div>

    <!-- UMBRELLA TAKE-HOME -->
    <div class="calc-panel" id="panel-umbrella">
      <div class="calc-panel-inner">
        <div class="calc-panel-left">
          <div class="calc-panel-title">Umbrella<br><em>Take-Home Calculator</em></div>
          <p class="calc-panel-desc">Estimate a contractor's net take-home pay through an umbrella company, after Income Tax, Employee & Employer NI, and umbrella margin.</p>
          <div class="calc-widget">
            <div class="cw-header">
              <div class="cw-title">Umbrella Take-Home</div>
              <div class="cw-uk-badge">2024/25 Tax Year</div>
            </div>
            <div class="cw-body">
              <div class="cw-field">
                <div class="cw-label">Assignment Rate (£/day)</div>
                <div class="cw-input-wrap">
                  <span class="cw-prefix">£</span>
                  <input class="cw-input" type="number" id="umb-rate" value="400" step="10" oninput="calcUmbrella()">
                </div>
              </div>
              <div class="cw-row">
                <div class="cw-field">
                  <div class="cw-label">Days/Week</div>
                  <div class="cw-input-wrap">
                    <input class="cw-input" type="number" id="umb-days" value="5" min="1" max="7" style="padding-left:16px" oninput="calcUmbrella()">
                  </div>
                </div>
                <div class="cw-field">
                  <div class="cw-label">Umbrella Margin</div>
                  <div class="cw-input-wrap">
                    <span class="cw-prefix">£</span>
                    <input class="cw-input" type="number" id="umb-margin" value="25" style="padding-left:28px" oninput="calcUmbrella()">
                    <span class="cw-suffix">/wk</span>
                  </div>
                </div>
              </div>
              <div class="cw-field">
                <div class="cw-label">Tax Code</div>
                <select class="cw-select" id="umb-tax" onchange="calcUmbrella()">
                  <option value="1257L" selected>1257L (Standard 2024/25)</option>
                  <option value="BR">BR (Basic Rate — no allowance)</option>
                  <option value="D0">D0 (Higher Rate — no allowance)</option>
                </select>
              </div>
            </div>
            <div class="cw-results" id="umbrella-results"></div>
            <div class="cw-footer">
              <span class="cw-note">Estimate only · Advise candidate to verify</span>
            </div>
          </div>
        </div>
        <div class="calc-panel-right reveal">
          <div class="section-eyebrow" style="margin-bottom:24px">Umbrella deductions explained</div>
          <div class="how-it-works">
            <div class="hiw-step"><div class="hiw-num">1</div><div class="hiw-content"><h4>Employer NI first</h4><p>The umbrella deducts Employer NI (13.8%) from the assignment rate before the contractor sees a penny.</p></div></div>
            <div class="hiw-step"><div class="hiw-num">2</div><div class="hiw-content"><h4>Umbrella margin</h4><p>Usually £15–30/week. Some companies hide this — transparency here builds trust with your contractors.</p></div></div>
            <div class="hiw-step"><div class="hiw-num">3</div><div class="hiw-content"><h4>Then PAYE deductions</h4><p>Income Tax and Employee NI apply to whatever's left. The result is the contractor's actual take-home.</p></div></div>
          </div>
          <div class="formula-box">
            <span class="formula-comment">// Weekly gross</span><br>
            <span class="formula-var">gross</span> <span class="formula-op">=</span> day_rate × days_per_week<br>
            <br>
            <span class="formula-comment">// After Employer NI + umbrella fee</span><br>
            <span class="formula-var">taxable</span> <span class="formula-op">=</span> gross - eni - umbrella_margin<br>
            <br>
            <span class="formula-comment">// After Income Tax + Employee NI</span><br>
            <span class="formula-var">take_home</span> <span class="formula-op">=</span> taxable - income_tax - ee_ni
          </div>
        </div>
      </div>
    </div>

  </div><!-- /calc-panels -->
</section>

<!-- ══════ PROFESSIONS ══════ -->
<section class="professions-section" id="professions">
  <div class="professions-inner">
    <div class="professions-header">
      <h2 class="professions-title">More toolkits <em>coming.</em></h2>
      <div class="professions-note">One toolkit per profession · Built with practitioners</div>
    </div>
    <div class="professions-grid">
      <div class="profession-card active-profession">
        <div class="profession-icon">🎯</div>
        <div class="profession-name">Recruitment</div>
        <div class="profession-count">8 calculators</div>
        <span class="profession-tag live">Live Now</span>
      </div>
      <div class="profession-card">
        <div class="profession-icon">💷</div>
        <div class="profession-name">Payroll</div>
        <div class="profession-count">Coming soon</div>
        <span class="profession-tag soon">In Development</span>
      </div>
      <div class="profession-card">
        <div class="profession-icon">🏗️</div>
        <div class="profession-name">Construction</div>
        <div class="profession-count">Coming soon</div>
        <span class="profession-tag soon">Planned</span>
      </div>
      <div class="profession-card">
        <div class="profession-icon">🍽️</div>
        <div class="profession-name">Hospitality</div>
        <div class="profession-count">Coming soon</div>
        <span class="profession-tag soon">Planned</span>
      </div>
      <div class="profession-card">
        <div class="profession-icon">⚖️</div>
        <div class="profession-name">Legal</div>
        <div class="profession-count">Coming soon</div>
        <span class="profession-tag soon">Planned</span>
      </div>
      <div class="profession-card">
        <div class="profession-icon">🏠</div>
        <div class="profession-name">Property</div>
        <div class="profession-count">Coming soon</div>
        <span class="profession-tag soon">Planned</span>
      </div>
      <div class="profession-card">
        <div class="profession-icon">🩺</div>
        <div class="profession-name">Healthcare</div>
        <div class="profession-count">Coming soon</div>
        <span class="profession-tag soon">Planned</span>
      </div>
      <div class="profession-card">
        <div class="profession-icon">📐</div>
        <div class="profession-name">Your Profession?</div>
        <div class="profession-count">Suggest one</div>
        <span class="profession-tag soon">Tell us</span>
      </div>
    </div>
  </div>
</section>

<!-- ══════ PHILOSOPHY ══════ -->
<section class="philosophy" id="about">
  <div class="philosophy-inner">
    <div class="philosophy-item reveal">
      <div class="philosophy-num">01</div>
      <div class="philosophy-title">Two inputs. One answer.</div>
      <p class="philosophy-body">Every calculator on Spentiq asks for as little as possible and gives back exactly what you need. The maths is our problem, not yours.</p>
    </div>
    <div class="philosophy-item reveal" style="transition-delay:0.15s">
      <div class="philosophy-num">02</div>
      <div class="philosophy-title">Built by practitioners.</div>
      <p class="philosophy-body">Each toolkit starts with someone who actually does the job. The formulas are verified, the language is right, and the edge cases are covered.</p>
    </div>
    <div class="philosophy-item reveal" style="transition-delay:0.3s">
      <div class="philosophy-num">03</div>
      <div class="philosophy-title">Free, always.</div>
      <p class="philosophy-body">The core calculators will never go behind a paywall. We're building something that earns trust first — everything else follows from that.</p>
    </div>
  </div>
</section>

<!-- ══════ FOOTER ══════ -->
<footer>
  <div class="footer-inner">
    <div class="footer-brand">Spent<em>iq</em></div>
    <div class="footer-note">Visual calculators for professionals · UK 2024/25</div>
  </div>
  <div class="footer-disclaimer">
    Spentiq calculators are provided for guidance only. All figures are estimates based on current UK tax rates and thresholds for 2024/25.
    They do not constitute financial, tax or legal advice. Always verify calculations against HMRC guidance or consult a qualified professional.
  </div>
</footer>

<script>
// ══════════════════════════════════════════════
// HERO CALCULATOR — Contractor Margin
// ══════════════════════════════════════════════
function calcHeroMargin() {
  const charge = parseFloat(document.getElementById('h-charge').value) || 0;
  const pay    = parseFloat(document.getElementById('h-pay').value) || 0;
  const days   = parseFloat(document.getElementById('h-days').value) || 5;
  const weeks  = parseFloat(document.getElementById('h-weeks').value) || 12;

  const dayMargin   = charge - pay;
  const weekMargin  = dayMargin * days;
  const totalMargin = weekMargin * weeks;
  const marginPct   = charge > 0 ? (dayMargin / charge * 100) : 0;
  const pctClass    = marginPct >= 20 ? '' : marginPct >= 12 ? 'secondary' : 'warning';

  document.getElementById('hero-results').innerHTML = `
    <div class="calc-result-row">
      <span class="calc-result-label">Daily Margin</span>
      <span class="calc-result-value secondary">${fmt(dayMargin)}</span>
    </div>
    <div class="calc-result-row">
      <span class="calc-result-label">Weekly Margin</span>
      <span class="calc-result-value secondary">${fmt(weekMargin)}</span>
    </div>
    <div class="calc-result-row">
      <span class="calc-result-label">Margin %</span>
      <span class="calc-result-value ${pctClass}">${marginPct.toFixed(1)}%</span>
    </div>
    <div style="height:1px;background:rgba(34,201,122,0.1);margin:4px 0"></div>
    <div class="calc-result-main">
      <span class="calc-result-main-label">Total Contract</span>
      <span class="calc-result-main-value">${fmt(totalMargin)}</span>
    </div>
  `;
}

// ══════════════════════════════════════════════
// TOOLKIT CALCULATOR 1 — Contractor Margin
// ══════════════════════════════════════════════
function calcMargin() {
  const charge = parseFloat(document.getElementById('m-charge').value) || 0;
  const pay    = parseFloat(document.getElementById('m-pay').value) || 0;
  const days   = parseFloat(document.getElementById('m-days').value) || 5;
  const weeks  = parseFloat(document.getElementById('m-weeks').value) || 12;
  const eni    = document.getElementById('m-eni').value === 'yes';

  const grossDay   = charge - pay;
  const grossWeek  = grossDay * days;
  const grossTotal = grossWeek * weeks;
  const grossPct   = charge > 0 ? (grossDay / charge * 100) : 0;

  // Employer NI: 13.8% of weekly pay above £175/wk threshold
  const weeklyPay = pay * days;
  const eniWeekly = eni ? Math.max(0, (weeklyPay - 175) * 0.138) : 0;
  const eniDay    = days > 0 ? eniWeekly / days : 0;
  const netDay    = grossDay - eniDay;
  const netWeek   = netDay * days;
  const netTotal  = netWeek * weeks;
  const netPct    = charge > 0 ? (netDay / charge * 100) : 0;

  const displayDay   = eni ? netDay   : grossDay;
  const displayWeek  = eni ? netWeek  : grossWeek;
  const displayTotal = eni ? netTotal : grossTotal;
  const displayPct   = eni ? netPct   : grossPct;
  const pctClass = displayPct >= 20 ? 'neutral' : displayPct >= 12 ? 'warn' : 'warn';

  document.getElementById('margin-results').innerHTML = `
    <div class="cw-result-grid">
      <div class="cw-result-item">
        <div class="cw-result-label">Daily Margin</div>
        <div class="cw-result-val neutral">${fmt(displayDay)}</div>
      </div>
      <div class="cw-result-item">
        <div class="cw-result-label">Weekly Margin</div>
        <div class="cw-result-val neutral">${fmt(displayWeek)}</div>
      </div>
      <div class="cw-result-item">
        <div class="cw-result-label">Margin %</div>
        <div class="cw-result-val ${pctClass}">${displayPct.toFixed(1)}%</div>
      </div>
      <div class="cw-result-item">
        <div class="cw-result-label">Contract Days</div>
        <div class="cw-result-val neutral">${(days * weeks).toFixed(0)} days</div>
      </div>
    </div>
    <div class="cw-result-main-row">
      <span class="cw-result-main-label">Total Contract Margin</span>
      <span class="cw-result-main-val">${fmt(displayTotal)}</span>
    </div>
  `;
}

// ══════════════════════════════════════════════
// TOOLKIT CALCULATOR 2 — Perm Fee
// ══════════════════════════════════════════════
function calcPerm() {
  const salary  = parseFloat(document.getElementById('p-salary').value) || 0;
  const pct     = parseFloat(document.getElementById('p-pct').value) || 0;
  const split   = parseFloat(document.getElementById('p-split').value) || 0;
  const rebate  = document.getElementById('p-rebate').value;

  const grossFee = salary * (pct / 100);
  const splitAmt = grossFee * (split / 100);
  const netFee   = grossFee - splitAmt;

  let rebateRisk = 0;
  let rebateNote = 'No rebate terms';
  if (rebate === '4') { rebateRisk = grossFee; rebateNote = 'Full fee at risk for 4 weeks'; }
  else if (rebate === '8') { rebateRisk = grossFee * 0.5; rebateNote = 'Up to 100% at risk (avg 50% exposure)'; }
  else if (rebate === '12') { rebateRisk = grossFee * 0.625; rebateNote = 'Up to 100% at risk (avg 62.5% exposure)'; }

  const splitClass = split > 0 ? 'warn' : 'neutral';

  document.getElementById('perm-results').innerHTML = `
    <div class="cw-result-grid">
      <div class="cw-result-item">
        <div class="cw-result-label">Gross Fee</div>
        <div class="cw-result-val neutral">${fmt(grossFee)}</div>
      </div>
      <div class="cw-result-item">
        <div class="cw-result-label">Split Out (${split}%)</div>
        <div class="cw-result-val ${splitClass}">${split > 0 ? '-' : ''}${fmt(splitAmt)}</div>
      </div>
      <div class="cw-result-item">
        <div class="cw-result-label">Max Rebate Risk</div>
        <div class="cw-result-val ${rebateRisk > 0 ? 'warn' : 'neutral'}">${fmt(rebateRisk)}</div>
      </div>
      <div class="cw-result-item">
        <div class="cw-result-label">Fee %</div>
        <div class="cw-result-val neutral">${pct.toFixed(1)}%</div>
      </div>
    </div>
    <div class="cw-result-main-row">
      <span class="cw-result-main-label">Your Net Fee</span>
      <span class="cw-result-main-val">${fmt(netFee)}</span>
    </div>
  `;
}

// ══════════════════════════════════════════════
// TOOLKIT CALCULATOR 3 — Day Rate
// ══════════════════════════════════════════════
function calcDayRate() {
  const salary  = parseFloat(document.getElementById('dr-salary').value) || 0;
  const wdays   = parseFloat(document.getElementById('dr-days').value) || 230;
  const uplift  = parseFloat(document.getElementById('dr-uplift').value) || 1;

  const bareRate  = salary / wdays;
  const fairRate  = bareRate * uplift;
  const annualVal = fairRate * wdays;
  const weekRate  = fairRate * 5;

  document.getElementById('dayrate-results').innerHTML = `
    <div class="cw-result-grid">
      <div class="cw-result-item">
        <div class="cw-result-label">Bare Day Rate</div>
        <div class="cw-result-val neutral">${fmt(bareRate)}</div>
      </div>
      <div class="cw-result-item">
        <div class="cw-result-label">Fair Rate (w/ uplift)</div>
        <div class="cw-result-val neutral">${fmt(fairRate)}</div>
      </div>
      <div class="cw-result-item">
        <div class="cw-result-label">Weekly Rate</div>
        <div class="cw-result-val neutral">${fmt(weekRate)}</div>
      </div>
      <div class="cw-result-item">
        <div class="cw-result-label">Annual Contract</div>
        <div class="cw-result-val neutral">${fmt(annualVal)}</div>
      </div>
    </div>
    <div class="cw-result-main-row">
      <span class="cw-result-main-label">Recommended Day Rate</span>
      <span class="cw-result-main-val">${fmt(fairRate)}</span>
    </div>
  `;
}

// ══════════════════════════════════════════════
// TOOLKIT CALCULATOR 4 — Holiday Pay
// ══════════════════════════════════════════════
function calcHoliday() {
  const rate   = parseFloat(document.getElementById('hol-rate').value) || 0;
  const days   = parseFloat(document.getElementById('hol-days').value) || 0;
  const model  = document.getElementById('hol-model').value;

  const totalEarned = rate * days;
  let holPay, holDays, method;

  if (model === 'rolled') {
    holPay  = totalEarned * 0.1207;
    holDays = days * 0.1207;
    method  = 'Rolled Up (12.07%)';
  } else {
    holDays = days * (28 / 260);
    holPay  = holDays * rate;
    method  = 'Accrued (28 days/yr)';
  }

  document.getElementById('holiday-results').innerHTML = `
    <div class="cw-result-grid">
      <div class="cw-result-item">
        <div class="cw-result-label">Total Earned</div>
        <div class="cw-result-val neutral">${fmt(totalEarned)}</div>
      </div>
      <div class="cw-result-item">
        <div class="cw-result-label">Holiday Days Accrued</div>
        <div class="cw-result-val neutral">${holDays.toFixed(1)} days</div>
      </div>
      <div class="cw-result-item">
        <div class="cw-result-label">Method</div>
        <div class="cw-result-val neutral" style="font-size:12px">${method}</div>
      </div>
      <div class="cw-result-item">
        <div class="cw-result-label">Per Day Value</div>
        <div class="cw-result-val neutral">${fmt(rate)}</div>
      </div>
    </div>
    <div class="cw-result-main-row">
      <span class="cw-result-main-label">Holiday Pay Liability</span>
      <span class="cw-result-main-val">${fmt(holPay)}</span>
    </div>
  `;
}

// ══════════════════════════════════════════════
// TOOLKIT CALCULATOR 5 — Rebate
// ══════════════════════════════════════════════
function calcRebate() {
  const fee   = parseFloat(document.getElementById('rb-fee').value) || 0;
  const weeks = parseFloat(document.getElementById('rb-weeks').value) || 0;
  const terms = document.getElementById('rb-terms').value;

  let rebatePct = 0;
  let label = 'No rebate due';

  if (terms === '4-100') {
    rebatePct = weeks <= 4 ? 100 : 0;
    label = weeks <= 4 ? '100% — within rebate window' : 'Outside rebate window';
  } else if (terms === '8-sliding') {
    if (weeks <= 2)       { rebatePct = 100; label = 'Weeks 1–2: 100%'; }
    else if (weeks <= 4)  { rebatePct = 75;  label = 'Weeks 3–4: 75%'; }
    else if (weeks <= 6)  { rebatePct = 50;  label = 'Weeks 5–6: 50%'; }
    else if (weeks <= 8)  { rebatePct = 25;  label = 'Weeks 7–8: 25%'; }
    else                  { rebatePct = 0;   label = 'Outside rebate window'; }
  } else if (terms === '12-sliding') {
    if (weeks <= 3)       { rebatePct = 100; label = 'Weeks 1–3: 100%'; }
    else if (weeks <= 6)  { rebatePct = 75;  label = 'Weeks 4–6: 75%'; }
    else if (weeks <= 9)  { rebatePct = 50;  label = 'Weeks 7–9: 50%'; }
    else if (weeks <= 12) { rebatePct = 25;  label = 'Weeks 10–12: 25%'; }
    else                  { rebatePct = 0;   label = 'Outside rebate window'; }
  } else if (terms === 'custom-50') {
    rebatePct = 50;
    label = 'Flat 50% rebate';
  }

  const rebateAmt = fee * (rebatePct / 100);
  const youKeep   = fee - rebateAmt;
  const amtClass  = rebatePct > 50 ? 'warn' : rebatePct > 0 ? 'warn' : 'neutral';

  document.getElementById('rebate-results').innerHTML = `
    <div class="cw-result-grid">
      <div class="cw-result-item">
        <div class="cw-result-label">Rebate %</div>
        <div class="cw-result-val ${amtClass}">${rebatePct}%</div>
      </div>
      <div class="cw-result-item">
        <div class="cw-result-label">Rebate Terms</div>
        <div class="cw-result-val neutral" style="font-size:11px;line-height:1.3">${label}</div>
      </div>
      <div class="cw-result-item">
        <div class="cw-result-label">Amount to Return</div>
        <div class="cw-result-val ${amtClass}">${fmt(rebateAmt)}</div>
      </div>
      <div class="cw-result-item">
        <div class="cw-result-label">You Keep</div>
        <div class="cw-result-val neutral">${fmt(youKeep)}</div>
      </div>
    </div>
    <div class="cw-result-main-row">
      <span class="cw-result-main-label">${rebatePct > 0 ? 'Rebate Owed' : 'Nil Rebate'}</span>
      <span class="cw-result-main-val" style="${rebatePct > 0 ? 'color:var(--amber)' : ''}">${fmt(rebateAmt)}</span>
    </div>
  `;
}

// ══════════════════════════════════════════════
// TOOLKIT CALCULATOR 6 — Umbrella Take-Home
// ══════════════════════════════════════════════
function calcUmbrella() {
  const rate       = parseFloat(document.getElementById('umb-rate').value) || 0;
  const days       = parseFloat(document.getElementById('umb-days').value) || 5;
  const umbMargin  = parseFloat(document.getElementById('umb-margin').value) || 25;
  const taxCode    = document.getElementById('umb-tax').value;

  const weeklyRate = rate * days;

  // Employer NI (13.8% above £175/wk)
  const eniWeekly = Math.max(0, (weeklyRate - 175) * 0.138);

  // Gross after ENI and umbrella fee
  const taxableWeekly = weeklyRate - eniWeekly - umbMargin;

  // Personal allowance / tax (weekly)
  const annualPA = taxCode === '1257L' ? 12570 : 0;
  const weeklyPA = annualPA / 52;

  let incomeTax = 0;
  const taxableIncome = Math.max(0, taxableWeekly - weeklyPA);
  // Basic rate 20% up to £50,270 annual (£966/wk)
  const basicBand = Math.min(taxableIncome, (50270 - annualPA) / 52);
  const higherBand = Math.max(0, taxableIncome - basicBand);

  if (taxCode === '1257L') {
    incomeTax = basicBand * 0.20 + higherBand * 0.40;
  } else if (taxCode === 'BR') {
    incomeTax = taxableWeekly * 0.20;
  } else if (taxCode === 'D0') {
    incomeTax = taxableWeekly * 0.40;
  }

  // Employee NI: 8% between £242–£967/wk, 2% above
  const eeNiLow  = Math.min(Math.max(0, taxableWeekly - 242), 725) * 0.08;
  const eeNiHigh = Math.max(0, taxableWeekly - 967) * 0.02;
  const eeNi = eeNiLow + eeNiHigh;

  const takeHome = taxableWeekly - incomeTax - eeNi;
  const annualTH = takeHome * 52;
  const effectiveRate = taxableWeekly > 0 ? ((1 - takeHome / taxableWeekly) * 100) : 0;

  document.getElementById('umbrella-results').innerHTML = `
    <div class="cw-result-grid">
      <div class="cw-result-item">
        <div class="cw-result-label">Employer NI</div>
        <div class="cw-result-val warn">-${fmt(eniWeekly)}/wk</div>
      </div>
      <div class="cw-result-item">
        <div class="cw-result-label">Income Tax</div>
        <div class="cw-result-val warn">-${fmt(incomeTax)}/wk</div>
      </div>
      <div class="cw-result-item">
        <div class="cw-result-label">Employee NI</div>
        <div class="cw-result-val warn">-${fmt(eeNi)}/wk</div>
      </div>
      <div class="cw-result-item">
        <div class="cw-result-label">Effective Tax Rate</div>
        <div class="cw-result-val warn">${effectiveRate.toFixed(1)}%</div>
      </div>
    </div>
    <div class="cw-result-main-row">
      <span class="cw-result-main-label">Weekly Take-Home</span>
      <span class="cw-result-main-val">${fmt(takeHome)}/wk</span>
    </div>
  `;
}

// ══════════════════════════════════════════════
// UTILITIES
// ══════════════════════════════════════════════
function fmt(n) {
  if (isNaN(n)) return '£—';
  return '£' + Math.round(n).toLocaleString('en-GB');
}

function switchCalc(el, id) {
  document.querySelectorAll('.calc-tab').forEach(t => t.classList.remove('active'));
  document.querySelectorAll('.calc-panel').forEach(p => p.classList.remove('active'));
  el.classList.add('active');
  document.getElementById('panel-' + id).classList.add('active');
}

// Scroll reveal
const obs = new IntersectionObserver(entries => {
  entries.forEach(e => { if (e.isIntersecting) e.target.classList.add('visible'); });
}, { threshold: 0.1 });
document.querySelectorAll('.reveal').forEach(el => obs.observe(el));

// ── INIT all calculators ──
calcHeroMargin();
calcMargin();
calcPerm();
calcDayRate();
calcHoliday();
calcRebate();
calcUmbrella();
</script>
</body>
</html>
